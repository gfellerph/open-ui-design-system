---
import Header from "../components/Header.astro";
import SideNav from "../components/SideNav.astro";
import PreviewBanner from "../components/PreviewBanner.astro";
import Footer from "../components/Footer.astro";
import "../styles/reset.css";
import "../styles/global.css";
import "../styles/theme.css";

export interface Props {
  title?: string;
}
const { title = "Open UI Design System" } = Astro.props;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cabin:wght@400;700&family=Source+Sans+Pro:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <!-- Open Graph and other resources -->
    <link rel="icon" type="image/svg+xml" href="/icons/favicon-32x32.png" />
    <meta name="description" content="Open UI Design System" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content="Open UI Design System" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:creator" content="Open UI" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content="Open UI " />
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
    <meta name="theme-color" content="#00a453" />
    <link rel="manifest" href="/manifest.webmanifest" />

    <meta name="generator" content={Astro.generator} />
  </head>
  <body>
    <div class="header-area">
      <PreviewBanner />
      <Header />
    </div>
    <div class="sidenav-area">
      <SideNav />
    </div>
    <slot name="anchornav" />
    <main id="main" class="main">
      <slot />
    </main>
    <div class="footer-area">
      <Footer />
    </div>
  </body>
</html>

<style>
  body {
    /*
      Basic grid layout for the site.
      The dot columns are for granular spacing control from within the layout and
      reduce the need for component padding.

      minmax(0, 1fr) constrains pre and tables from overflowing the grid:
      https://stackoverflow.com/questions/52861086/why-does-minmax0-1fr-work-for-long-elements-while-1fr-doesnt
    */
    display: grid;
    grid-template-areas:
      "header header header header"
      ". sidenav main ."
      "footer footer footer footer";
    grid-template-columns: auto auto minmax(0, 1fr) auto;
    grid-template-rows: auto 1fr auto;
    gap: var(--layout-gap-block) var(--layout-gap-inline);
    min-height: 100dvh;

    &:has(.anchornav) {
      grid-template-areas:
        "header header header header header"
        ". sidenav main anchornav ."
        "footer footer footer footer footer";
      grid-template-columns: auto auto minmax(0, 1fr) auto auto;
    }

    @media (max-width: 768px) {
      /* Sidenav has to go somewhere but is hidden on mobile */
      grid-template-areas:
        "header header header"
        "sidenav main ."
        "footer footer footer";
      grid-template-columns: auto minmax(0, 1fr) auto;
      grid-template-rows: auto 1fr auto; /* 🏎️ 🪙 🏎️ */

      &:has(.anchornav) {
        grid-template-areas:
          "header header header"
          ". anchornav ."
          "sidenav main ."
          "footer footer footer";
        grid-template-columns: auto minmax(0, 1fr) auto auto;
      }
    }
  }

  .header-area {
    grid-area: header;
  }
  .sidenav-area {
    grid-area: sidenav;
  }
  .anchornav {
    grid-area: anchornav;
  }
  .main {
    grid-area: main;
  }
  .footer-area {
    grid-area: footer;
  }
</style>
